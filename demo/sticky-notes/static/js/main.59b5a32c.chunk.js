(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(39)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"app",function(){return b}),n.d(o,"notes",function(){return E}),n.d(o,"noteForm",function(){return D});var a=n(0),r=n.n(a),s=n(13),i=n.n(s),c=n(8),u=n(10),l=n(20),p=n(7),h="app.NOTE_FORM_OPEN",d="app.NOTE_FORM_CLOSE",m={isNoteFormOpened:!1,searchedTags:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(p.a)({},e);switch(t.type){case h:return n.isNoteFormOpened=!0,n;case d:return n.isNoteFormOpened=!1,n;default:return e}}function f(e){return e.app.isNoteFormOpened}var v=n(11),O="notes.NOTES_FETCHED",g="notes.NOTE_ADDED",y="notes.NOTE_UPDATED",j="notes.NOTE_DELETED",C="notes.SEARCH_TAGS_CHANGED",N={notesById:{},searchTags:[]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(p.a)({},e);switch(t.type){case O:return n.notesById=Object(p.a)({},t.notes),n;case g:var o=Object(p.a)({},t.note);return n.notesById=Object(p.a)({},n.notesById,Object(v.a)({},t.note.id,o)),n;case y:return n.notesById=Object(p.a)({},n.notesById,Object(v.a)({},t.note.id,t.note)),n;case j:var a=Object(p.a)({},n.notesById);return delete a[t.note.id],n.notesById=a,n;case C:return n.searchTags=t.tags,n;default:return e}}function k(e){return Object.values(e.notes.notesById)}function _(e){return e.notes.searchTags}var I="noteForm.FORM_OPEN",T="noteForm.FORM_CLOSE",S="noteForm.NOTE_CHANGE",B={note:{title:"",body:"",tags:[],colorScheme:"yellow"},isOpened:!1};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(p.a)({},e);switch(t.type){case I:return t.note&&(n.note=Object(p.a)({},t.note)),n.isOpened=!0,n;case T:return n.note=Object(p.a)({},B.note),n.isOpened=!1,n;case S:var o=t.data;return n.note=Object(p.a)({},n.note,o),n;default:return e}}function F(e){return e.noteForm.note}function w(e){return e.noteForm.isOpened}n(30);var R=n(2),A=n(3),x=n(5),L=n(4),P=n(1),H=n(6);function M(){return{type:h}}function J(){return{type:d}}function G(e){return{type:I,note:e}}function V(){return{type:T}}function q(e){return{type:S,data:e}}var U=new(function(){function e(t){Object(R.a)(this,e),this.storage=t}return Object(A.a)(e,[{key:"get",value:function(e){return this.fetchNotes()[e]||null}},{key:"add",value:function(e){var t=this.fetchNewID(),n=this.fetchNotes();if(n[t])throw new Error("ID already exists");return e.id=t,n[t]=e,this.saveNotes(n),e}},{key:"update",value:function(e,t){t=Object(p.a)({},t);var n=this.fetchNotes(),o=n[e];if(!o)throw new Error("Note has not exists");t.id&&delete t.id;var a=Object(p.a)({},o,t);return n[e]=a,this.saveNotes(n),a}},{key:"delete",value:function(e){var t=this.fetchNotes();return delete t[e.id],this.saveNotes(t),e}},{key:"fetchNewID",value:function(){var e=this.fetchIDCounter();return this.saveIDCounter(++e),e}},{key:"fetchIDCounter",value:function(){return this.storage.getItem("NotesIDCounter")||0}},{key:"saveIDCounter",value:function(e){this.storage.setItem("NotesIDCounter",e)}},{key:"fetchNotes",value:function(){var e=this.storage.getItem("NotesRecords");return e?JSON.parse(e):{}}},{key:"saveNotes",value:function(e){this.storage.setItem("NotesRecords",JSON.stringify(e))}}]),e}())(window?window.localStorage:null);n(31);var z=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onAddNoteBtnClick=n.onAddNoteBtnClick.bind(Object(P.a)(n)),n.onOverlayClick=n.onOverlayClick.bind(Object(P.a)(n)),n.onSearchTagsChanged=n.onSearchTagsChanged.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__header"},r.a.createElement("div",{className:"navbar"},r.a.createElement("h1",{className:"navbar__brand"},"Sticky Notes"),r.a.createElement("button",{className:"btn btn--lg",type:"button",onClick:this.onAddNoteBtnClick},"+ Add note"),r.a.createElement("input",{className:"input-ghost search-tags-input",placeholder:"Search tags",onChange:this.onSearchTagsChanged}))),r.a.createElement("div",{className:"app__main"},this.props.notesBoard),r.a.createElement("div",{className:"overlay"+(this.props.isNoteFormOpened?" overlay--opened":""),onClick:this.onOverlayClick},r.a.createElement("div",{className:"overlay__content"},this.props.noteForm)))}},{key:"onAddNoteBtnClick",value:function(e){e.preventDefault(),this.props.onNoteFormOpen()}},{key:"onOverlayClick",value:function(e){e.currentTarget===e.target&&this.props.onOverlayClose()}},{key:"onSearchTagsChanged",value:function(e){var t;t=""===e.target.value.trim()?[]:e.target.value.split(" "),this.props.onSearchTagsChanged(t)}}]),t}(a.Component),K=(n(32),n(33),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onEditBtnClick=n.onEditBtnClick.bind(Object(P.a)(n)),n.onDeleteBtnClick=n.onDeleteBtnClick.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t="";return this.props.searchTags.length&&(t="note--unfocus",this.props.searchTags.filter(function(t){return e.props.note.tags.includes(t)}).length&&(t="")),r.a.createElement("div",{className:"note ".concat(t," note--color-")+this.props.note.colorScheme},r.a.createElement("h4",{className:"note__title"},this.props.note.title),r.a.createElement("p",{className:"note__body"},this.props.note.body),r.a.createElement("div",{className:"note__tags"},this.props.note.tags.map(function(e,t){return r.a.createElement("span",{key:t,className:"tag"},e)})),r.a.createElement("div",{className:"note__footer"},r.a.createElement("button",{className:"btn btn--sm",onClick:this.onEditBtnClick},"Edit"),r.a.createElement("button",{className:"btn btn--sm",onClick:this.onDeleteBtnClick},"Delete")))}},{key:"onEditBtnClick",value:function(e){e.preventDefault(),this.props.onEdit(this.props.note)}},{key:"onDeleteBtnClick",value:function(e){e.preventDefault(),this.props.onDelete(this.props.note)}}]),t}(a.Component)),Q=function(e){function t(){return Object(R.a)(this,t),Object(x.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"notes-board"},this.props.notes.map(function(t,n){return r.a.createElement("div",{key:n,className:"notes-board__item"},r.a.createElement(K,{note:t,searchTags:e.props.searchTags,onEdit:e.props.onNoteEdit,onDelete:e.props.onNoteDelete}))}))}}]),t}(a.Component),W=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onNoteEdit=n.onNoteEdit.bind(Object(P.a)(n)),n.onNoteDelete=n.onNoteDelete.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){var t=U.fetchNotes();e({type:O,notes:t})})}},{key:"render",value:function(){return r.a.createElement(Q,{notes:this.props.notes,searchTags:this.props.searchTags,onNoteEdit:this.onNoteEdit,onNoteDelete:this.onNoteDelete})}},{key:"onNoteEdit",value:function(e){this.props.dispatch(M()),this.props.dispatch(G(e))}},{key:"onNoteDelete",value:function(e){this.props.dispatch(function(e){return function(t){U.delete(e),t({type:j,note:e})}}(e))}}]),t}(a.Component);var X=Object(c.b)(function(e){return{notes:k(e),searchTags:_(e)}})(W),Y=(n(34),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onRemoveBtnClick=n.onRemoveBtnClick.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"tag-control"},r.a.createElement("span",{className:"tag-control__content"},this.props.tag),r.a.createElement("button",{className:"tag-control__remove",title:"Remove",onClick:this.onRemoveBtnClick},"x"))}},{key:"onRemoveBtnClick",value:function(e){e.preventDefault(),this.props.onRemove(this.props.tag)}}]),t}(a.Component)),Z=(n(35),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onAddBtnClick=n.onAddBtnClick.bind(Object(P.a)(n)),n.onInputFocus=n.onInputFocus.bind(Object(P.a)(n)),n.onInputBlur=n.onInputBlur.bind(Object(P.a)(n)),n.onEnterPressInInput=n.onEnterPressInInput.bind(Object(P.a)(n)),n.inputItem=r.a.createRef(),n.input=r.a.createRef(),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tags-input"},this.props.tags.map(function(t,n){return r.a.createElement("div",{key:n,className:"tags-input__item"},r.a.createElement(Y,{tag:t,onRemove:e.props.onTagRemove}))}),r.a.createElement("div",{className:"tags-input__item tags-input__item--hidden",ref:this.inputItem},r.a.createElement("input",{type:"text",className:"tags-input__input",placeholder:"new tag",ref:this.input,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),r.a.createElement("div",{className:"tags-input__item"},r.a.createElement("button",{className:"btn btn--sm",type:"button",onClick:this.onAddBtnClick},"+ add tag")))}},{key:"showInput",value:function(){this.inputItem.current.classList.remove("tags-input__item--hidden")}},{key:"hideInput",value:function(){this.inputItem.current.classList.add("tags-input__item--hidden")}},{key:"focusInput",value:function(){this.input.current.focus()}},{key:"blurInput",value:function(){this.input.current.blur()}},{key:"startListenEnter",value:function(){this.input.current.addEventListener("keypress",this.onEnterPressInInput)}},{key:"stopListenEnter",value:function(){this.input.current.removeEventListener("keypress",this.onEnterPressInInput)}},{key:"onAddBtnClick",value:function(e){e.preventDefault(),this.showInput(),this.focusInput()}},{key:"onInputFocus",value:function(e){this.startListenEnter()}},{key:"onInputBlur",value:function(e){this.stopListenEnter();var t=this.input.current.value.trim();""!==t&&(this.props.onTagAdd(t),this.input.current.value=""),this.hideInput()}},{key:"onEnterPressInInput",value:function(e){13===e.keyCode&&(e.preventDefault(),this.blurInput())}}]),t}(a.Component)),$=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).state={tags:n.props.tags},n.onTagAdd=n.onTagAdd.bind(Object(P.a)(n)),n.onTagRemove=n.onTagRemove.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement(Z,{tags:this.state.tags,onTagAdd:this.onTagAdd,onTagRemove:this.onTagRemove})}},{key:"onTagAdd",value:function(e){var t=this.state.tags;t.includes(e)||(t.push(e),this.setState({tags:t})),this.props.onChanged(t)}},{key:"onTagRemove",value:function(e){var t=this.state.tags.filter(function(t){return t!==e});this.setState({tags:t}),this.props.onChanged(t)}}]),t}(a.Component),ee=(n(36),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onClick=n.onClick.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e="color-option--"+this.props.color,t=this.props.isSelected?"color-option--selected":"";return r.a.createElement("button",{className:"color-option ".concat(e," ").concat(t," color-select__option"),onClick:this.onClick,type:"button",title:this.props.color},r.a.createElement("span",{className:"color-option__label"},this.props.color))}},{key:"onClick",value:function(e){e.preventDefault(),this.props.onSelect(this.props.color)}}]),t}(a.Component)),te=(n(37),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onColorSelect=n.onColorSelect.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"color-select"},this.props.colors.map(function(t,n){return r.a.createElement(ee,{key:n,color:t,isSelected:t===e.props.selected,onSelect:e.onColorSelect})}))}},{key:"onColorSelect",value:function(e){this.props.onChange(e)}}]),t}(a.Component)),ne=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(x.a)(this,Object(L.a)(t).call(this))).state={colors:["yellow","blue","green"]},e.onChange=e.onChange.bind(Object(P.a)(e)),e}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement(te,{colors:this.state.colors,selected:this.props.selected||"yellow",onChange:this.onChange})}},{key:"onChange",value:function(e){this.setState({selected:e}),this.props.onChanged(e)}}]),t}(a.Component),oe=(n(38),function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onBodyChanged=n.onBodyChanged.bind(Object(P.a)(n)),n.onSubmit=n.onSubmit.bind(Object(P.a)(n)),n.title=r.a.createRef(),n.body=r.a.createRef(),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"note-form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"note-form__block"},r.a.createElement("input",{type:"text",name:"title",className:"input-ghost input-ghost--xl",defaultValue:this.props.note.title,ref:this.title,autoComplete:"off",placeholder:"Title"})),r.a.createElement("div",{className:"note-form__block"},r.a.createElement("textarea",{name:"body",className:"textarea-ghost textarea-ghost--lg note-form__body",defaultValue:this.props.note.body,ref:this.body,onChange:this.onBodyChanged,placeholder:"Note text",required:!0})),r.a.createElement("div",{className:"note-form__footer"},r.a.createElement("div",{className:"note-form__tags"},this.props.tagsInput),r.a.createElement("div",{className:"note-form__colors"},this.props.colorSelect),r.a.createElement("div",{className:"note-form__buttons"},r.a.createElement("button",{className:"btn btn--lg",type:"submit"},this.props.note.id?"Save note":"Add note"))))}},{key:"onBodyChanged",value:function(e){var t=e.target,n=t.offsetHeight-t.clientHeight;t.style.height="auto",t.style.height=t.scrollHeight+n+"px"}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit({title:this.title.current.value,body:this.body.current.value})}}]),t}(a.Component)),ae=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onTagsChanged=n.onTagsChanged.bind(Object(P.a)(n)),n.onColorChanged=n.onColorChanged.bind(Object(P.a)(n)),n.onSubmit=n.onSubmit.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=r.a.createElement($,{tags:this.props.note.tags,onChanged:this.onTagsChanged}),t=r.a.createElement(ne,{selected:this.props.note.colorScheme,onChanged:this.onColorChanged});return this.props.isOpened?r.a.createElement(oe,{note:this.props.note,tagsInput:e,colorSelect:t,onSubmit:this.onSubmit}):""}},{key:"onTagsChanged",value:function(e){this.props.dispatch(q({tags:e}))}},{key:"onColorChanged",value:function(e){this.props.dispatch(q({colorScheme:e}))}},{key:"onSubmit",value:function(e){var t=Object(p.a)({},this.props.note,e);t.id?this.props.dispatch(function(e,t){return function(n){U.update(e,t),n({type:y,note:t})}}(t.id,t)):this.props.dispatch(function(e){return function(t){U.add(e),t({type:g,note:e})}}(t)),this.props.dispatch(V()),this.props.dispatch(J())}}]),t}(a.Component);var re=Object(c.b)(function(e){return{note:F(e),isOpened:w(e)}})(ae),se=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(x.a)(this,Object(L.a)(t).call(this,e))).onNoteFormOpen=n.onNoteFormOpen.bind(Object(P.a)(n)),n.onNoteFormClose=n.onNoteFormClose.bind(Object(P.a)(n)),n.onSearchTagsChanged=n.onSearchTagsChanged.bind(Object(P.a)(n)),n}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=r.a.createElement(X,null),t=r.a.createElement(re,null);return r.a.createElement(z,{notesBoard:e,noteForm:t,isNoteFormOpened:this.props.isNoteFormOpened,onNoteFormOpen:this.onNoteFormOpen,onOverlayClose:this.onNoteFormClose,onSearchTagsChanged:this.onSearchTagsChanged})}},{key:"onNoteFormOpen",value:function(){this.props.dispatch(M()),this.props.dispatch(G())}},{key:"onNoteFormClose",value:function(){this.props.dispatch(J()),this.props.dispatch(V())}},{key:"onSearchTagsChanged",value:function(e){this.props.dispatch(function(e){return{type:C,tags:e}}(e))}}]),t}(a.Component);var ie=Object(c.b)(function(e){return{isNoteFormOpened:f(e)}})(se),ce=Object(u.d)(Object(u.c)(o),Object(u.a)(l.a));i.a.render(r.a.createElement(c.a,{store:ce},r.a.createElement(ie,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.59b5a32c.chunk.js.map